# DR 개발 관련

## DR Process

1. CBL 계산
2. CBL 기준 절감량 계산
3. 가전기기 우선순위(사용빈도) 계산
4. 절감량과 우선순위를 비교하여 가전기기 상태 추천


### 1. CBL 계산.
#### 예시)5월 14일  00:00 ~ 00:30까지 DR 발령된 경우
##### 15분 단위 전력 사용량 테이블

|날짜|시간(15분 단위)|가정 내 전체 전력 사용|
|----|--------------:|----------------------:|
|2019-05-09|00:00|50Wh|
|2019-05-09|00:30|30Wh|
|...|...|...|
|2019-05-10|00:00|20Wh|
|2019-05-10|00:30|30Wh|
|...|...|...|
|2019-05-11|00:00|30Wh|
|2019-05-11|00:30|40Wh|
|...|...|...|
|2019-05-12|00:00|20Wh|
|2019-05-12|00:30|10Wh|
|...|...|...|
|2019-05-13|00:00|30Wh|
|2019-05-13|00:30|40Wh|
|...|...|...|
|2019-05-14|00:00|40Wh|
|2019-05-14|00:30|50Wh|
|...|...|...|

##### 날짜별 전력 사용량 계산
|날짜|가정 내 전체 전력 사용|
|----|----------------------:|
|2019-05-09|80Wh|
|2019-05-10|50Wh|
|2019-05-11|70Wh|
|2019-05-12|30Wh|
|2019-05-13|70Wh|
|2019-05-14|90Wh|

- 기준일인 14일 이전 5일간 전력 사용량 중 가장 작은 값을 제외한 평균
- 예시) (80+50+70+70)/4 = 270/4 = 67.5Wh (30Wh 제외)

### 2. CBL 기준 절감요구량 및 사용가능량 계산

|CBL|A|B|
|:---------:|---|---:|
|0 ~ 500|0.3|0|
|500 ~ 1500|0.15|75|
|1500 ~ | 0|300|

- 계산식) 절감요구량 = CBL * A + B
- 예시)
    - 1)CBL이 250Wh인 경우
        - 250 * 0.3 + 0 = 75Wh
        - 250 - 75 = 175Wh 까지 사용 가능
    - 2)CBL이 750Wh인 경우
        - 750 * 0.15 + 75 = 187.5Wh
        - 750 - 187.5 = 562.5Wh 까지 사용 가능
    - 3)CBL이 1700Wh인 경우
        - 1700 * 0 + 300 = 300Wh
        - 1700 - 300 = 1400Wh 까지 사용 가능
        

### 3. 가전기기 우선순위(사용빈도) 계산

#### 15분 단위 사용상태 테이블(장치별)

|날짜|시간(15분 단위)|사용상태|
|----|--------------:|----------------------:|
|2019-05-09|00:00|1|
|2019-05-09|00:30|1|
|...|...|...|
|2019-05-10|00:00|0|
|2019-05-10|00:30|1|
|...|...|...|
|2019-05-11|00:00|1|
|2019-05-11|00:30|1|
|...|...|...|
|2019-05-12|00:00|0|
|2019-05-12|00:30|0|
|...|...|...|
|2019-05-13|00:00|0|
|2019-05-13|00:30|1|
|...|...|...|
|2019-05-14|00:00|0|
|2019-05-14|00:30|0|
|...|...|...|

- 해당 시간대 중 사용 했으면 카운트
    - 예시) 2019-05-10일에는 00:00 미사용이지만, 00:30에는 사용했으므로, 사용한 것으로 취급
    - 총 4번 사용




### 4. 절감량과 우선순위를 비교하여 가전기기 상태 추천


가전기기별 소비전력량 테이블

|가전기기명|시간당 소비전력|
|:----------:|---------------:|
|TV|30|
|전자레인지|100|
|에어컨|1400|
|세탁기|20|
|선풍기|30|
|컴퓨터|80|
|모니터|40|

|순위|가전기기명|절감량|사용빈도|DR참여|제어금지|
|:---:|:----------:|------:|--------:|:-------:|:--------:|
|1|TV|15|20|No|No|
|2|전자레인지|50|15|No|No|
|3|에어컨|700|10|No|No|
|4|세탁기|10|2|No|No|
|5|선풍기|15|1|Yes|No|
|6|컴퓨터|40|0|Yes|No|
|7|모니터|20|0|Yes|No|



- 위의 표는 사용 빈도를 기준으로 정렬
- 절감량: 가전기기별 시간당 소비전력량 * DR 발령 시간(시간)
    - TV: 30 * 0.5 = 15Wh
- 위부터 절감량을 합산하여 사용가능량을 초과하는 지 확인
    - 제어금지기기가 있는 경우 우선 합산
    - 예시) 사용가능량이 780Wh 인 경우
        - 15+50+700+10 = 775Wh
        - 세탁기까지 사용 가능



